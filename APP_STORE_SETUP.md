# App Store Connect 内购产品配置指南

## 🚨 重要：解决"元数据丢失"问题

当前App Store Connect显示"元数据丢失"是因为内购产品还没有正确配置。请按以下步骤操作：

### 1. **登录App Store Connect**
- 访问 https://appstoreconnect.apple.com
- 使用你的Apple Developer账户登录

### 2. **选择你的应用**
- 在"我的App"中找到"Flashcards Viewer"
- 点击进入应用详情页面

### 3. **配置内购产品**

#### 步骤1：创建产品
1. 在左侧菜单中点击"功能" → "App内购买项目"
2. 点击右上角的"+"号创建新产品
3. 选择"非消耗型项目"

#### 步骤2：配置试用产品 (iap.trial.14)
- **产品ID**: `iap.trial.14`
- **参考名称**: `14天试用`
- **显示名称**: `14天试用`
- **描述**: `免费试用14天，体验完整功能`
- **价格**: `免费` (选择"免费")
- **审核信息**: 
  - 审核备注: "免费试用功能，用户可体验完整版本14天"
  - 审核截图: 上传应用截图

#### 步骤3：配置完整版产品 (iap.fullversion)
- **产品ID**: `iap.fullversion`
- **参考名称**: `完整版本`
- **显示名称**: `完整版本`
- **描述**: `解锁所有功能，永久使用`
- **价格**: `¥18.00` (选择对应价格等级)
- **审核信息**:
  - 审核备注: "完整版本购买，解锁所有高级功能"
  - 审核截图: 上传应用截图

### 4. **产品状态设置**
1. 创建产品后，将状态设置为"准备提交"
2. 确保所有必填字段都已填写
3. 保存所有更改

### 5. **测试沙盒购买**
1. 在设备上使用沙盒测试账户
2. 测试购买流程
3. 验证购买状态更新

## 📱 开发环境测试

在App Store产品配置完成之前，应用会使用fallback产品进行测试：

- 试用产品会显示为"14天试用 - ¥0.00"
- 完整版产品会显示为"完整版本 - ¥18.00"
- 购买时会显示真实的错误信息

## 🔧 故障排除

### 问题1：产品查询失败
**解决方案**：
- 确保产品ID完全匹配
- 检查产品状态是否为"准备提交"
- 等待几分钟让App Store同步

### 问题2：购买失败
**解决方案**：
- 使用沙盒测试账户
- 确保设备已登录iTunes账户
- 检查网络连接

### 问题3：元数据丢失
**解决方案**：
- 完成上述产品配置步骤
- 确保所有必填字段都已填写
- 将产品状态设置为"准备提交"

## 📞 需要帮助？

如果配置过程中遇到问题：
1. 检查Apple Developer文档
2. 联系Apple Developer Support
3. 查看应用审核指南

---

**注意**：在App Store产品配置完成之前，购买功能会显示真实的错误信息。这是正常的开发行为。 